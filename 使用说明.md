### 1. 基础介绍

.
#### 1.1 编写规则
```js
[
    {
        "备注": "快出",
        "功能类型": "宏",
        "触发键": "C",
        "宏指令": "D,延迟 0.018,D,延迟 0.018,D"
    },
    {
        "备注": "快出",
        "功能类型": "连击",
        "触发键": "C",
        "连击键": "D",
        "每秒次数": "30"
    }
]
```
**文件使用格式为 json，如果对于 json 数据格式有了解的可跳过**

每个文件只能有一对中括号 **[ ]**，且位于最外层，可看作一个大容器（箱子）

中括号内可包含若干对大括号 **{ }**，每个大括号之间以逗号分隔，最后一对大括号不用，可看作一个个功能

每个大括号内包含若干行键值对 **" ": " "**，键值对之间以逗号分隔，最后一行键值对不用，为具体的功能编写

键值对的前面部分为关键字，后面部分为此关键字对应的内容

.
#### 1.2 鼠标位置获取
![](img\鼠标位置.png)

在 **下拉控件** 内选择 **鼠标位置** ，就会在旁边的**文本控件**内显示**鼠标当前在显示器上的实时位置**

如果**文本控件内没有变化**，可以切换到 按键名称 再选择回 鼠标位置


.
#### 1.3 按键名称获取
![](img\按键名称.png)
在 **下拉控件** 内选择 **按键名称**，按下键盘任意键后，就会在旁边的**文本控件**内显示**当前按下按键的名字**

如果**文本控件内没有变化**，可以切换到 鼠标位置 再选择回 按键名称

.
### 2. 键鼠控制

.
#### 2.1 宏
```js
[
    {
        "功能类型": "宏",
        "触发键": "C",
        "宏指令": "D,延迟 0.018,D,延迟 0.018,D"
    }
]
```
声明 **功能类型** 为 宏

触发键**被按下**就会执行**宏指令**里面的内容

接受的参数：

    单击  ==  key
    按下  ==  按下 key
    弹起  ==  弹起 key
    延迟  ==  延迟 秒

.
#### 2.2 连击
```js
[
    {
        "功能类型": "连击",
        "触发键": "C",
        "连击键": "D",
        "每秒次数": "30"
    }
]
```
声明 **功能类型** 为 连击

设置每秒单击的次数

设置连击键

触发键 **被按下** 就会以每秒n次单击 **连击键**

触发键 **被弹起** 则停止连击

.
#### 2.3 固定连击
```js
[
    {
        "功能类型": "固定连击",
        "连击次数": "30",
        "连击频率": "0.02",
        "触发键": "Next",
        "连击键": "Volume_Down"
    }
]
```
声明 **功能类型** 为 固定连击

连击次数：每次触发连击的总次数

连击频率：单击之间的间隔时间，单位为秒

触发键 **被按下** 就会以每n秒一次的频率单击连击键，直至完成总次数，不可打断

.
#### 2.4 组合键
```js
[
    {
        "功能类型": "组合键",
        "触发键": "F",
        "辅助1": "Numpad1",
        "辅助2": "Numpad3",
        "宏指令": "按下 D,延迟 0.195,弹起 辅助,延迟 0.02,按下 辅助,延迟 0.295,弹起 辅助,弹起 D,延迟 0.015,!A,延迟 0.02,S,按下 辅助"
    }
]
```
声明 **功能类型** 为 组合键

设置 辅助1 和 辅助2 键

触发方式1：**长按** 辅助1 **或** 辅助2 加 **点击** 触发键（不触发 * 关键字后的指令）

触发方式2：**长按** 辅助1 **或** 辅助2 加 **长按** 触发键（不触发 ! 关键字后的指令）

**宏指令内**的 按下 辅助、弹起 辅助  为**触发时按下**的辅助键

按下 反辅助、弹起 反辅助 则是**未按下**的辅助键

接受的参数：

    单击  ==  key
    按下  ==  按下 key , 按下 辅助 , 按下 反辅助
    弹起  ==  弹起 key , 弹起 辅助 , 弹起 反辅助
    延迟  ==  延迟 秒
    *    ==  在任何指令之前加入 * 关键字，使用触发方式1触发时，不执行该指令
    !    ==  在任何指令之前加入 ! 关键字，使用触发方式2触发时，不执行该指令

.
#### 2.5 组合键（分支）
```js
[
    {
        "备注": "轮盘左右",
        "功能类型": "组合键",
        "触发键": "Lcontrol",
        "辅助1": "Numpad1",
        "辅助2": "Numpad3",
        "分支1": "按下左键 2307 957,移动 2237 957 0.18,弹起左键",
        "分支2": "按下左键 2307 957,移动 2377 957 0.18,弹起左键"
    },
    {
        "备注": "轮盘上下",
        "功能类型": "组合键",
        "触发键": "Lcontrol",
        "辅助1": "Numpad5",
        "辅助2": "Numpad2",
        "分支1": "按下左键 2307 957,移动 2307 887 0.18,弹起左键",
        "分支2": "按下左键 2307 957,移动 2307 1027 0.18,弹起左键"
    }
]
```
声明 **功能类型** 为 组合键

设置 辅助1 和 辅助2 键

触发方式：**点击** 辅助1 **或** 辅助2 加 **点击触发键**（不支持 ! 和 * 关键字）

用 辅助1 **触发**则执行 分支1

用 辅助2 **触发**则执行 分支2

分支内指令 **只兼容** 鼠标控制 功能的指令

.
#### 2.6 映射键
```js
[
    {
        "功能类型": "映射键",
        "触发键": "R",
        "辅助1": "Numpad1",
        "辅助2": "Numpad3",
        "映射1": "Numpad7",
        "映射2": "Numpad9",
        "宏指令": "按下 D,按下 映射,S,延迟 0.42,弹起 映射,弹起 D,延迟 0.05,S"
    }
]
```
声明 **功能类型** 为 映射键

设置 **辅助1** 和 **辅助2** 键，及 **映射1** 和 **映射2** 键

触发方式1：**长按** 辅助1 **或** 辅助2 加 **点击**触发键（不触发*关键字后的指令）

触发方式2：**长按** 辅助1 **或** 辅助2 加 **长按**触发键（不触发!关键字后的指令）

**宏指令内**的 按下 映射、弹起 映射  为**触发时按下**的辅助键和同映射键

按下 反映射、弹起 反映射 则是**未按下**的辅助键和同映射键

接受的参数：

    单击  ==  key
    按下  ==  按下 key , 按下 辅助 , 按下 反辅助 , 按下 映射 , 按下 反映射
    弹起  ==  弹起 key , 弹起 辅助 , 弹起 反辅助 , 弹起 映射 , 弹起 反映射
    延迟  ==  延迟 秒
    *    ==  在任何指令之前加入 * 关键字，使用触发方式1触发时，不执行该指令
    !    ==  在任何指令之前加入 ! 关键字，使用触发方式2触发时，不执行该指令

.
#### 2.7 鼠标控制
```js
[
    {
        "功能类型": "鼠标控制",
        "触发键": "Y",
        "鼠标回位": "开",
        "宏指令": "按下左键 1944 775,延迟 0.02,移动 1771 879 0.02,弹起左键"
    },
]
```
声明 **功能类型** 为 鼠标控制

**鼠标回位** 如果等于开，则鼠标会在 延迟之前、弹起之后、单击之后 回到原位（可以不写，默认为关）

接受的参数：

    延迟	==	延迟 0.1(空格分隔)
    移动	== 移动 x y 用时( 用时 如果不写，则默认值为0.2秒，空格分隔)
    按下左键 == 按下左键 x y( x y 如果不写,则沿用上一个坐标，空格分隔)
    按下右键 == 按下右键 x y( x y 如果不写,则沿用上一个坐标，空格分隔)
    按下中键 == 按下中键 x y( x y 如果不写,则沿用上一个坐标，空格分隔)
    弹起左键 == 弹起左键(不接受参数)
    弹起右键 == 弹起右键(不接受参数)
    弹起中键 == 弹起中键(不接受参数)
    单击左键 == 单击左键 x y( x y 如果不写,则沿用上一个坐标，空格分隔)
    单击右键 == 单击右键 x y( x y 如果不写,则沿用上一个坐标，空格分隔)
    单击中键 == 单击中键 x y( x y 如果不写,则沿用上一个坐标，空格分隔)
    中键滚动 == 中键滚动 ±值(值必须写，空格分隔)
    key     == 键盘按键（只能接收单击参数，如：Q,W,E,R，如果key放在最后，且和触发键相同就能形成循环）

.
### 3. 高级操作

.
#### 3.1 调用
```js
[
    {
        "功能类型": "连击",
        "触发键": "C",
        "连击键": "D",
        "每秒次数": "50"
    },
    {
        "功能类型": "宏",
        "触发键": "K",
        "宏指令": "Numpad2,延迟 0.04,Numpad2"
    },
    {
        "功能类型": "组合键",
        "触发键": "F",
        "辅助1": "Numpad1",
        "辅助2": "Numpad3",
        "宏指令": "按下 C,K,延迟 0.1,弹起 C,F"
    }
]
```
以上的**组合键功能**调用了一个宏功能、一个连击功能、以及它自身

除了 连击功能 **不能调用**其它功能，其它所有功能**都可以调用**所有功能，**包括**调用它自身，**形成循环**

.
#### 3.2 找图
```js
[
    {
        "功能类型": "找图",
        "触发键": "J",
        "图片名称": "1.png",
        "寻找范围": "0,0,100,100",
        "相似度": "0.8",
        "分支Y": "按下左键,延迟 0.02,弹起左键",
        "分支N": "J"
    }
]
```
把需要寻找的目标图片放到 **听雨竞技\config\img\seek_picture** 文件夹下，如下图：

![](\img\找图.png)

声明 **功能类型** 为 找图

图片名称：需要后辍名，如：1.png、2.jpg，可以百度**如何开启文件扩展名**

寻找范围：前两个值为左上角起始点(**x1,y1**)，后两个值为右下角结束点(**x2,y2**)，如果不设置寻找范围，则在全屏寻找，效率较慢

相似度： 0 至 1 的数，**可以是小数**（0.1415926），值越大越大要求的相似度越高，反之亦然，如果不设置相似度，则为**默认值 0.8**

分支Y：在目标区域内 **找到图片** 后执行

分支N：在目标区域内 **未找到图片** 后执行

分支内指令 **只兼容鼠标控制** 功能的指令

**注：上图中内容执行后，程序在区域坐标（0,0,100,100）内寻找与 1.png 图片相似度为0.8图像，如果能找到则执行分支Y的指令，未能找到则执行分支N的指令，上图中分支N的指令与触发键相同，所以会形成循环，直到找到或手动停止**

.
#### 3.3 找色
```js
[
    {
        "功能类型": "找色",
        "触发键": "J",
        "颜色": "#1F2430,#FFCC66",
        "坐标": "2133 468,26 1387",
        "模式": "单一",
        "相似度": "1",
        "分支Y": "F",
        "分支N": "J"
    }
]
```
声明 **功能类型** 为 找色

颜色：可以使用QQ截图功能（Ctrl + Alt + A），复制色号（Ctrl + C），粘贴色号（Ctrl + V）

坐标：一个坐标**对应**一个色号，**不能出现**坐标与色号**数量不匹配**的关系

模式：默认为**全部**模式，所有坐标的颜色**都匹配上**对应的色号才会执行分支Y，否则执行分支N，在**单一**模式下只要**其中一项匹配上**就会执行分支Y，全部匹配不上才会执行分支N

相似度：0 至 1的数，**可以是小数**（0.1415926），1为必须找到一样的颜色，如果不设置相似度，则为**默认值 0.8**

分支Y：在目标坐标上 **匹配颜色** 后执行

分支N：在目标坐标上 **未匹配颜色** 后执行

分支内指令 **只兼容鼠标控制** 功能的指令

**注：上图中内容执行后，程序在坐标1上寻找颜色1，坐标2上寻找颜色2，因为设置了单一模式，只需要匹配上一项就会执行分支Y的指令，都未能找到则执行分支N的指令，上图中分支N的指令与触发键相同，所以会形成循环，直到找到或手动停止**

.
#### 3.4 录制脚本
```js
[
    {
        "功能类型": "录制",
        "录制停止": "T",
        "回放": "Y",
        "屏蔽": "U,I,F,Z,C,E,R,L,K,O,Space",
        "宏指令": ""
    }
]
```
声明 **功能类型** 为 录制

**录制与停止**为一个键，为切换功能

录制时，您对键盘的所有操作都将会被录制下来

停止时，所有录制的操作都会被**写入**到录制功能的**宏指令**里面

按下回放键，则会回放宏指令里面的内容，录制下来的指令**可以编辑更改**

如果设置了**屏蔽键**，则**不会录制**屏蔽的所有按键，以逗号相隔，最后一个不需要逗号相隔

建议屏蔽其他功能的触发键


.
#### 3.5 操作逻辑
```js
[
    {
        "功能类型": "组合键",
        "触发键": "F",
        "辅助1": "Numpad1",
        "辅助2": "Numpad3",
        "宏指令": "按下 D,延迟 0.195,弹起 辅助,延迟 0.02,按下 辅助,延迟 0.295,弹起 辅助,弹起 D,延迟 0.015,!A,延迟 0.02,S,按下 辅助"
    },
]
```
严格来讲 组合键和映射键功能 的触发方式是 点击辅助键 **加** 点击触发键 **或** 点击辅助键 **加** 长按触发键

但是如果指令里面**含有** 辅助键 那么就不能那样去触发

因为你不知道你**手动**弹起辅助键的时候指令运行到了哪里

如果指令刚刚运行到 按下 辅助 你就手动 弹起 辅助

那么整个指令就不对了

所以我们**正确**的触发方式是 长按辅助键 + 点击触发键 或 长按辅助键 + 长按触发键

因为我们是长按辅助键，所以指令可以看作是在**一开始**就有一个 按下 辅助 的指令

又因为我们是长按辅助键，所以最后要加回 按下 辅助 指令，让我们来**手动**触发 弹起 辅助 指令





